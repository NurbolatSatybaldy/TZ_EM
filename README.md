# –°–∏—Å—Ç–µ–º–∞ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–∞ FastAPI

–°–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –Ω–∞ FastAPI —Å PostgreSQL. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≥–∏–±–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–æ–ª–µ–π (RBAC) —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º–∏ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –±–∏–∑–Ω–µ—Å-—Ä–µ—Å—É—Ä—Å–æ–≤.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
- [API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#api-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- [–°—Ö–µ–º–∞ –ë–∞–∑—ã –î–∞–Ω–Ω—ã—Ö](#—Å—Ö–µ–º–∞-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
- [–°–∏—Å—Ç–µ–º–∞ –†–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ü—Ä–∞–≤](#—Å–∏—Å—Ç–µ–º–∞-—Ä–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è-–ø—Ä–∞–≤)
- [–ü—Ä–∏–º–µ—Ä—ã –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

- **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** - —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ email –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –ø–∞—Ä–æ–ª–µ–π
- **–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É (Login)** - —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º JWT —Ç–æ–∫–µ–Ω–æ–≤ –∏ —Å–µ—Å—Å–∏–π
- **–í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã (Logout)** - —Å –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π
- **–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** - —á–µ—Ä–µ–∑ Bearer —Ç–æ–∫–µ–Ω—ã –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ Authorization
- **–•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ bcrypt –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è
- **JWT —Ç–æ–∫–µ–Ω—ã** - –¥–ª—è stateless –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **–°–µ—Å—Å–∏–∏** - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π –≤ –ë–î —Å –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –≤—Ä–µ–º–µ–Ω–∏ –∂–∏–∑–Ω–∏

### 2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

- **–ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ñ–∏–ª—è** - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è** - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–µ–Ω–∏, —Ñ–∞–º–∏–ª–∏–∏, –æ—Ç—á–µ—Å—Ç–≤–∞, email
- **–£–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞** - –º—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ (soft delete) —Å —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π `is_active=False`

### 3. –°–∏—Å—Ç–µ–º–∞ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (RBAC)

- **–†–æ–ª–∏** - admin, manager, user, guest (—Ä–∞—Å—à–∏—Ä—è–µ–º–æ)
- **–ë–∏–∑–Ω–µ—Å-—ç–ª–µ–º–µ–Ω—Ç—ã** - —Ä–µ—Å—É—Ä—Å—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (users, products, orders, stores, permissions)
- **–î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è** - 7 —Ç–∏–ø–æ–≤ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –Ω–∞ –∫–∞–∂–¥—ã–π —Ä–µ—Å—É—Ä—Å:
  - `read_permission` - —á—Ç–µ–Ω–∏–µ —Å–≤–æ–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤
  - `read_all_permission` - —á—Ç–µ–Ω–∏–µ –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤
  - `create_permission` - —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤
  - `update_permission` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–≤–æ–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤
  - `update_all_permission` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤
  - `delete_permission` - —É–¥–∞–ª–µ–Ω–∏–µ —Å–≤–æ–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤
  - `delete_all_permission` - —É–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤

### 4. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π API

- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏** - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —Ä–æ–ª–µ–π
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å-—ç–ª–µ–º–µ–Ω—Ç–∞–º–∏** - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —Ä–µ—Å—É—Ä—Å–æ–≤
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞** - —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª –¥–æ—Å—Ç—É–ø–∞
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏** - –ø—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–µ–π

### 5. Mock –ë–∏–∑–Ω–µ—Å-–†–µ—Å—É—Ä—Å—ã

–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ endpoints –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏—Å—Ç–µ–º—ã —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø—Ä–∞–≤:
- **/resources/products** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏
- **/resources/orders** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏
- **/resources/stores** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞–º–∏

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°—Ç–µ–∫ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- **Backend Framework**: FastAPI 0.109.0
- **Database**: PostgreSQL (—á–µ—Ä–µ–∑ SQLAlchemy ORM)
- **Authentication**: JWT (python-jose)
- **Password Hashing**: bcrypt (—á–µ—Ä–µ–∑ passlib)
- **Validation**: Pydantic v2
- **Migration**: Alembic (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ü—Ä–æ–µ–∫—Ç–∞

```
–¢–ó/
‚îú‚îÄ‚îÄ main.py                 # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ config.py              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ database.py            # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
‚îú‚îÄ‚îÄ models.py              # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ schemas.py             # Pydantic —Å—Ö–µ–º—ã
‚îú‚îÄ‚îÄ security.py            # –§—É–Ω–∫—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (hashing, JWT)
‚îú‚îÄ‚îÄ dependencies.py        # FastAPI dependencies –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ seed_data.py           # –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
‚îú‚îÄ‚îÄ requirements.txt       # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ .env.example           # –ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ README.md              # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ routers/
    ‚îú‚îÄ‚îÄ __init__.py
    ‚îú‚îÄ‚îÄ auth.py            # Endpoints –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
    ‚îú‚îÄ‚îÄ users.py           # Endpoints —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
    ‚îú‚îÄ‚îÄ admin.py           # –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ endpoints
    ‚îî‚îÄ‚îÄ mock_resources.py  # Mock –±–∏–∑–Ω–µ—Å-—Ä–µ—Å—É—Ä—Å—ã
```

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.9+
- PostgreSQL 12+
- pip (–º–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤ Python)

### –®–∞–≥–∏ –£—Å—Ç–∞–Ω–æ–≤–∫–∏

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ/–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞**

```bash
cd "/Users/nurbolat.satybaldy/Desktop/–¢–ó"
```

2. **–°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è**

```bash
python -m venv venv
source venv/bin/activate  # –ù–∞ Windows: venv\Scripts\activate
```

3. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**

```bash
pip install -r requirements.txt
```

4. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL**

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
createdb auth_system

# –ò–ª–∏ —á–µ—Ä–µ–∑ psql
psql -U postgres
CREATE DATABASE auth_system;
\q
```

5. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è**

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example`:

```bash
# .env
DATABASE_URL=postgresql://username:password@localhost:5432/auth_system
SECRET_KEY=–≤–∞—à-—Å–µ–∫—Ä–µ—Ç–Ω—ã–π-–∫–ª—é—á-–º–∏–Ω–∏–º—É–º-32-—Å–∏–º–≤–æ–ª–∞
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
SESSION_EXPIRE_DAYS=7
```

**–í–∞–∂–Ω–æ**: –ó–∞–º–µ–Ω–∏—Ç–µ `username` –∏ `password` –Ω–∞ –≤–∞—à–∏ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ PostgreSQL.

6. **–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏**

```bash
python seed_data.py
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—Å—Ç:
- 4 —Ä–æ–ª–∏ (admin, manager, user, guest)
- 5 –±–∏–∑–Ω–µ—Å-—ç–ª–µ–º–µ–Ω—Ç–æ–≤ (users, products, orders, stores, permissions)
- –ü—Ä–∞–≤–∏–ª–∞ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –∫–∞–∂–¥–æ–π —Ä–æ–ª–∏
- 4 —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

7. **–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**

```bash
# –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π
uvicorn main:app --reload

# –ò–ª–∏ —á–µ—Ä–µ–∑ Python
python main.py
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8000

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–æ—Å—Ç—É–ø –∫ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å–∞–º:

- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc

### –¢–µ—Å—Ç–æ–≤—ã–µ –£—á–µ—Ç–Ω—ã–µ –ó–∞–ø–∏—Å–∏

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `seed_data.py` –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:

| –†–æ–ª—å    | Email                  | –ü–∞—Ä–æ–ª—å      | –û–ø–∏—Å–∞–Ω–∏–µ                           |
|---------|------------------------|-------------|------------------------------------|
| Admin   | admin@example.com      | admin123    | –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ä–µ—Å—É—Ä—Å–∞–º     |
| Manager | manager@example.com    | manager123  | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏, –∑–∞–∫–∞–∑–∞–º–∏      |
| User    | user@example.com       | user123     | –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–≤–∞—Ä–æ–≤, —Å–≤–æ–∏ –∑–∞–∫–∞–∑—ã      |
| Guest   | guest@example.com      | guest123    | –¢–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –∏ –º–∞–≥–∞–∑–∏–Ω–æ–≤  |

### –ü—Ä–æ—Ü–µ—Å—Å –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**

```bash
POST /auth/register
Content-Type: application/json

{
  "email": "newuser@example.com",
  "first_name": "–ò–≤–∞–Ω",
  "last_name": "–ò–≤–∞–Ω–æ–≤",
  "middle_name": "–ò–≤–∞–Ω–æ–≤–∏—á",
  "password": "securepassword123",
  "password_repeat": "securepassword123"
}
```

2. **–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É**

```bash
POST /auth/login
Content-Type: application/json

{
  "email": "admin@example.com",
  "password": "admin123"
}

# –û—Ç–≤–µ—Ç:
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "token_type": "bearer"
}
```

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤**

```bash
GET /users/me
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

4. **–í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã**

```bash
POST /auth/logout
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

## üìä –°—Ö–µ–º–∞ –ë–∞–∑—ã –î–∞–Ω–Ω—ã—Ö

### ER-–¥–∏–∞–≥—Ä–∞–º–º–∞ (—Ç–µ–∫—Å—Ç–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ)

```
users
‚îú‚îÄ‚îÄ id (PK)
‚îú‚îÄ‚îÄ email (unique)
‚îú‚îÄ‚îÄ first_name
‚îú‚îÄ‚îÄ last_name
‚îú‚îÄ‚îÄ middle_name
‚îú‚îÄ‚îÄ hashed_password
‚îú‚îÄ‚îÄ is_active
‚îú‚îÄ‚îÄ role_id (FK -> roles.id)
‚îú‚îÄ‚îÄ created_at
‚îî‚îÄ‚îÄ updated_at

roles
‚îú‚îÄ‚îÄ id (PK)
‚îú‚îÄ‚îÄ name (unique)
‚îú‚îÄ‚îÄ description
‚îî‚îÄ‚îÄ created_at

business_elements
‚îú‚îÄ‚îÄ id (PK)
‚îú‚îÄ‚îÄ name (unique)
‚îú‚îÄ‚îÄ description
‚îî‚îÄ‚îÄ created_at

access_roles_rules
‚îú‚îÄ‚îÄ id (PK)
‚îú‚îÄ‚îÄ role_id (FK -> roles.id)
‚îú‚îÄ‚îÄ element_id (FK -> business_elements.id)
‚îú‚îÄ‚îÄ read_permission
‚îú‚îÄ‚îÄ read_all_permission
‚îú‚îÄ‚îÄ create_permission
‚îú‚îÄ‚îÄ update_permission
‚îú‚îÄ‚îÄ update_all_permission
‚îú‚îÄ‚îÄ delete_permission
‚îú‚îÄ‚îÄ delete_all_permission
‚îú‚îÄ‚îÄ created_at
‚îî‚îÄ‚îÄ updated_at

sessions
‚îú‚îÄ‚îÄ id (PK)
‚îú‚îÄ‚îÄ user_id (FK -> users.id)
‚îú‚îÄ‚îÄ session_token (unique)
‚îú‚îÄ‚îÄ expires_at
‚îî‚îÄ‚îÄ created_at
```

### –°–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏

- `users.role_id` ‚Üí `roles.id` (Many-to-One)
- `access_roles_rules.role_id` ‚Üí `roles.id` (Many-to-One)
- `access_roles_rules.element_id` ‚Üí `business_elements.id` (Many-to-One)
- `sessions.user_id` ‚Üí `users.id` (Many-to-One)

## üîê –°–∏—Å—Ç–µ–º–∞ –†–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ü—Ä–∞–≤

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–¥–µ–ª—å **RBAC (Role-Based Access Control)** —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º–∏. –ö–∞–∂–¥–∞—è —Ä–æ–ª—å –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–∞–∑–ª–∏—á–Ω—ã–º –±–∏–∑–Ω–µ—Å-—Ä–µ—Å—É—Ä—Å–∞–º.

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –°–∏—Å—Ç–µ–º—ã

#### 1. –†–æ–ª–∏ (Roles)

–†–æ–ª–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –≥—Ä—É–ø–ø—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø–æ—Ö–æ–∂–∏–º–∏ –ø—Ä–∞–≤–∞–º–∏. –ü—Ä–∏–º–µ—Ä—ã:
- **admin** - –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º—É
- **manager** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏
- **user** - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø
- **guest** - —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ

#### 2. –ë–∏–∑–Ω–µ—Å-–≠–ª–µ–º–µ–Ω—Ç—ã (Business Elements)

–†–µ—Å—É—Ä—Å—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∫ –∫–æ—Ç–æ—Ä—ã–º —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø:
- **users** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- **products** - —Ç–æ–≤–∞—Ä—ã
- **orders** - –∑–∞–∫–∞–∑—ã
- **stores** - –º–∞–≥–∞–∑–∏–Ω—ã
- **permissions** - –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

#### 3. –ü—Ä–∞–≤–∏–ª–∞ –î–æ—Å—Ç—É–ø–∞ (Access Rules)

–°–≤—è–∑—ã–≤–∞—é—Ç —Ä–æ–ª–∏ —Å –±–∏–∑–Ω–µ—Å-—ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ —á–µ—Ä–µ–∑ 7 —Ç–∏–ø–æ–≤ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π:

| –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ              | –û–ø–∏—Å–∞–Ω–∏–µ                                    |
|-------------------------|---------------------------------------------|
| read_permission         | –ß—Ç–µ–Ω–∏–µ —Å–≤–æ–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤                       |
| read_all_permission     | –ß—Ç–µ–Ω–∏–µ –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤                        |
| create_permission       | –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤                     |
| update_permission       | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–≤–æ–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤                   |
| update_all_permission   | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤                    |
| delete_permission       | –£–¥–∞–ª–µ–Ω–∏–µ —Å–≤–æ–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤                     |
| delete_all_permission   | –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤                      |

### –õ–æ–≥–∏–∫–∞ –ü—Ä–æ–≤–µ—Ä–∫–∏ –†–∞–∑—Ä–µ—à–µ–Ω–∏–π

#### –ê–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞:

1. **–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑ JWT —Ç–æ–∫–µ–Ω–∞
2. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–∏** - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –ë–î
3. **–ü–æ–∏—Å–∫ –ø—Ä–∞–≤–∏–ª–∞ –¥–æ—Å—Ç—É–ø–∞** - –ø–æ–∏—Å–∫ –∑–∞–ø–∏—Å–∏ –≤ `access_roles_rules` –¥–ª—è –¥–∞–Ω–Ω–æ–π —Ä–æ–ª–∏ –∏ —Ä–µ—Å—É—Ä—Å–∞
4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è**:
   - –î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π `read`, `update`, `delete`:
     - –ï—Å–ª–∏ –µ—Å—Ç—å `*_all_permission` ‚Üí –¥–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à–µ–Ω –∫–æ –≤—Å–µ–º –æ–±—ä–µ–∫—Ç–∞–º
     - –ï—Å–ª–∏ –µ—Å—Ç—å `*_permission` ‚Üí –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –∫ —Å–≤–æ–∏–º –æ–±—ä–µ–∫—Ç–∞–º (–ø—Ä–æ–≤–µ—Ä–∫–∞ `owner_id`)
   - –î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–∏ `create`:
     - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ `create_permission`
5. **–í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞**:
   - ‚úÖ –î–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à–µ–Ω ‚Üí –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞
   - ‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Üí 401 Unauthorized
   - ‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ ‚Üí 403 Forbidden

### –ü—Ä–∏–º–µ—Ä—ã –ü—Ä–∞–≤–∏–ª –î–æ—Å—Ç—É–ø–∞

#### Admin (–ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø)

```python
{
  "role": "admin",
  "element": "products",
  "read_permission": True,
  "read_all_permission": True,
  "create_permission": True,
  "update_permission": True,
  "update_all_permission": True,
  "delete_permission": True,
  "delete_all_permission": True
}
```

#### Manager (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏)

```python
{
  "role": "manager",
  "element": "products",
  "read_permission": True,
  "read_all_permission": True,
  "create_permission": True,
  "update_permission": True,
  "update_all_permission": True,
  "delete_permission": True,
  "delete_all_permission": True
}
```

#### User (—Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∑–∞–∫–∞–∑—ã)

```python
{
  "role": "user",
  "element": "orders",
  "read_permission": True,        # –ú–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å —Å–≤–æ–∏ –∑–∞–∫–∞–∑—ã
  "read_all_permission": False,   # –ù–µ –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å —á—É–∂–∏–µ
  "create_permission": True,      # –ú–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞–∫–∞–∑—ã
  "update_permission": True,      # –ú–æ–∂–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å —Å–≤–æ–∏ –∑–∞–∫–∞–∑—ã
  "update_all_permission": False, # –ù–µ –º–æ–∂–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å —á—É–∂–∏–µ
  "delete_permission": True,      # –ú–æ–∂–µ—Ç —É–¥–∞–ª—è—Ç—å —Å–≤–æ–∏ –∑–∞–∫–∞–∑—ã
  "delete_all_permission": False  # –ù–µ –º–æ–∂–µ—Ç —É–¥–∞–ª—è—Ç—å —á—É–∂–∏–µ
}
```

#### Guest (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ)

```python
{
  "role": "guest",
  "element": "products",
  "read_permission": True,
  "read_all_permission": True,
  "create_permission": False,
  "update_permission": False,
  "update_all_permission": False,
  "delete_permission": False,
  "delete_all_permission": False
}
```

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è "–í–ª–∞–¥–µ–Ω–∏—è" (Ownership)

–î–ª—è —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ "—Å–≤–æ–∏–º" –∏ "—á—É–∂–∏–º" –æ–±—ä–µ–∫—Ç–∞–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è –≤–ª–∞–¥–µ–Ω–∏—è:

- –ö–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç –∏–º–µ–µ—Ç –ø–æ–ª–µ `owner_id`, —É–∫–∞–∑—ã–≤–∞—é—â–µ–µ –Ω–∞ —Å–æ–∑–¥–∞—Ç–µ–ª—è
- –ü—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π `*_permission` (–±–µ–∑ `all`) —Å–∏—Å—Ç–µ–º–∞ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç `owner_id` —Å `user.id`
- –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —É–ø—Ä–∞–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏

**–ü—Ä–∏–º–µ—Ä**:
```python
# –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å user_id=5 –ø—ã—Ç–∞–µ—Ç—Å—è –æ–±–Ω–æ–≤–∏—Ç—å –∑–∞–∫–∞–∑ —Å owner_id=3
# –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å update_permission=True, –Ω–æ update_all_permission=False
# –†–µ–∑—É–ª—å—Ç–∞—Ç: 403 Forbidden (–º–æ–∂–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∑–∞–∫–∞–∑—ã)

# –ï—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è update_all_permission=True
# –†–µ–∑—É–ª—å—Ç–∞—Ç: 200 OK (–º–æ–∂–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å –ª—é–±—ã–µ –∑–∞–∫–∞–∑—ã)
```

## üìù –ü—Ä–∏–º–µ—Ä—ã –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥

```bash
# 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
curl -X POST "http://localhost:8000/auth/register" \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@example.com",
    "first_name": "–¢–µ—Å—Ç",
    "last_name": "–¢–µ—Å—Ç–æ–≤",
    "middle_name": "–¢–µ—Å—Ç–æ–≤–∏—á",
    "password": "password123",
    "password_repeat": "password123"
  }'

# 2. –í—Ö–æ–¥
curl -X POST "http://localhost:8000/auth/login" \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@example.com",
    "password": "password123"
  }'
# –û—Ç–≤–µ—Ç: {"access_token": "...", "token_type": "bearer"}
```

### –ü—Ä–∏–º–µ—Ä 2: –†–∞–±–æ—Ç–∞ —Å –ø—Ä–æ—Ñ–∏–ª–µ–º

```bash
# –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–µ–±–µ
curl -X GET "http://localhost:8000/users/me" \
  -H "Authorization: Bearer YOUR_TOKEN"

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
curl -X PUT "http://localhost:8000/users/me" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "first_name": "–ù–æ–≤–æ–µ –ò–º—è"
  }'

# –£–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞ (soft delete)
curl -X DELETE "http://localhost:8000/users/me" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### –ü—Ä–∏–º–µ—Ä 3: –î–æ—Å—Ç—É–ø –∫ —Ä–µ—Å—É—Ä—Å–∞–º

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–≤–∞—Ä–æ–≤ (–¥–æ—Å—Ç—É–ø–Ω–æ guest, user, manager, admin)
curl -X GET "http://localhost:8000/resources/products" \
  -H "Authorization: Bearer YOUR_TOKEN"

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ (–¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ manager –∏ admin)
curl -X POST "http://localhost:8000/resources/products?name=NewProduct&description=Test" \
  -H "Authorization: Bearer YOUR_TOKEN"

# –ü–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä –æ—Ç –∏–º–µ–Ω–∏ guest –≤–µ—Ä–Ω–µ—Ç 403 Forbidden
```

### –ü—Ä–∏–º–µ—Ä 4: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Ä–æ–ª–µ–π (—Ç–æ–ª—å–∫–æ admin)
curl -X GET "http://localhost:8000/admin/roles" \
  -H "Authorization: Bearer ADMIN_TOKEN"

# –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–∞–≤–∏–ª–∞ –¥–æ—Å—Ç—É–ø–∞
curl -X POST "http://localhost:8000/admin/access-rules" \
  -H "Authorization: Bearer ADMIN_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "role_id": 3,
    "element_id": 2,
    "read_permission": true,
    "read_all_permission": false,
    "create_permission": false,
    "update_permission": false,
    "update_all_permission": false,
    "delete_permission": false,
    "delete_all_permission": false
  }'

# –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
curl -X PUT "http://localhost:8000/admin/users/5/role?role_id=2" \
  -H "Authorization: Bearer ADMIN_TOKEN"
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ú–µ—Ä—ã –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

1. **–•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ bcrypt —Å —Å–æ–ª—å—é
2. **JWT —Ç–æ–∫–µ–Ω—ã** - –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º —Å—Ä–æ–∫–æ–º –¥–µ–π—Å—Ç–≤–∏—è
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** - Pydantic —Å—Ö–µ–º—ã –¥–ª—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
4. **SQL Injection –∑–∞—â–∏—Ç–∞** - –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ SQLAlchemy ORM
5. **CORS** - –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞ Cross-Origin Resource Sharing
6. **Soft Delete** - –º—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è Production

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –¥–ª—è –≤—Å–µ—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–ª–æ–∂–Ω—ã–π `SECRET_KEY` (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ CORS –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `allow_origins=["*"]`)
4. –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ rate limiting –¥–ª—è API endpoints
6. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
7. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
8. –†–µ–∞–ª–∏–∑—É–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–∏ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### –¢–µ—Å—Ç 1: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
```
1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚úì
2. –ü–æ–ø—ã—Ç–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º email (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞) ‚úì
3. –í—Ö–æ–¥ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ ‚úì
4. –í—Ö–æ–¥ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø–∞—Ä–æ–ª–µ–º (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞) ‚úì
5. –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã ‚úì
```

#### –¢–µ—Å—Ç 2: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
```
1. Admin –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ä–µ—Å—É—Ä—Å–∞–º ‚úì
2. Manager –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Ç–æ–≤–∞—Ä–∞–º–∏ ‚úì
3. User –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å –≤—Å–µ —Ç–æ–≤–∞—Ä—ã, –Ω–æ –Ω–µ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å ‚úì
4. Guest –º–æ–∂–µ—Ç —Ç–æ–ª—å–∫–æ —á–∏—Ç–∞—Ç—å —Ç–æ–≤–∞—Ä—ã ‚úì
5. –ü–æ–ø—ã—Ç–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –±–µ–∑ —Ç–æ–∫–µ–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 401 ‚úì
6. –ü–æ–ø—ã—Ç–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –±–µ–∑ –ø—Ä–∞–≤ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 403 ‚úì
```

#### –¢–µ—Å—Ç 3: Ownership
```
1. User —Å–æ–∑–¥–∞–µ—Ç –∑–∞–∫–∞–∑ (owner_id = user.id) ‚úì
2. User –º–æ–∂–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å —Å–≤–æ–π –∑–∞–∫–∞–∑ ‚úì
3. User –Ω–µ –º–æ–∂–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å —á—É–∂–æ–π –∑–∞–∫–∞–∑ (403) ‚úì
4. Manager –º–æ–∂–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å –ª—é–±–æ–π –∑–∞–∫–∞–∑ ‚úì
```

## üìö API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (`/auth`)

| –ú–µ—Ç–æ–¥ | Endpoint          | –û–ø–∏—Å–∞–Ω–∏–µ                    | –¢—Ä–µ–±—É–µ—Ç Auth |
|-------|-------------------|-----------------------------|--------------|
| POST  | /auth/register    | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è    | ‚ùå            |
| POST  | /auth/login       | –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É              | ‚ùå            |
| POST  | /auth/logout      | –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã            | ‚úÖ            |
| GET   | /auth/me          | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–º —é–∑–µ—Ä–µ  | ‚úÖ            |

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (`/users`)

| –ú–µ—Ç–æ–¥  | Endpoint   | –û–ø–∏—Å–∞–Ω–∏–µ                 | –¢—Ä–µ–±—É–µ—Ç Auth |
|--------|------------|--------------------------|--------------|
| GET    | /users/me  | –ü–æ–ª—É—á–∏—Ç—å —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å    | ‚úÖ            |
| PUT    | /users/me  | –û–±–Ω–æ–≤–∏—Ç—å —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å    | ‚úÖ            |
| DELETE | /users/me  | –£–¥–∞–ª–∏—Ç—å —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç     | ‚úÖ            |

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ (`/admin`)

| –ú–µ—Ç–æ–¥  | Endpoint                     | –û–ø–∏—Å–∞–Ω–∏–µ                      | –¢—Ä–µ–±—É–µ—Ç Admin |
|--------|------------------------------|-------------------------------|---------------|
| GET    | /admin/roles                 | –°–ø–∏—Å–æ–∫ —Ä–æ–ª–µ–π                  | ‚úÖ             |
| POST   | /admin/roles                 | –°–æ–∑–¥–∞—Ç—å —Ä–æ–ª—å                  | ‚úÖ             |
| PUT    | /admin/roles/{id}            | –û–±–Ω–æ–≤–∏—Ç—å —Ä–æ–ª—å                 | ‚úÖ             |
| DELETE | /admin/roles/{id}            | –£–¥–∞–ª–∏—Ç—å —Ä–æ–ª—å                  | ‚úÖ             |
| GET    | /admin/elements              | –°–ø–∏—Å–æ–∫ –±–∏–∑–Ω–µ—Å-—ç–ª–µ–º–µ–Ω—Ç–æ–≤       | ‚úÖ             |
| POST   | /admin/elements              | –°–æ–∑–¥–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç               | ‚úÖ             |
| PUT    | /admin/elements/{id}         | –û–±–Ω–æ–≤–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç              | ‚úÖ             |
| DELETE | /admin/elements/{id}         | –£–¥–∞–ª–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç               | ‚úÖ             |
| GET    | /admin/access-rules          | –°–ø–∏—Å–æ–∫ –ø—Ä–∞–≤–∏–ª –¥–æ—Å—Ç—É–ø–∞         | ‚úÖ             |
| POST   | /admin/access-rules          | –°–æ–∑–¥–∞—Ç—å –ø—Ä–∞–≤–∏–ª–æ               | ‚úÖ             |
| PUT    | /admin/access-rules/{id}     | –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ              | ‚úÖ             |
| DELETE | /admin/access-rules/{id}     | –£–¥–∞–ª–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ               | ‚úÖ             |
| GET    | /admin/users                 | –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π          | ‚úÖ             |
| PUT    | /admin/users/{id}/role       | –ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è    | ‚úÖ             |

### Mock –†–µ—Å—É—Ä—Å—ã (`/resources`)

| –ú–µ—Ç–æ–¥  | Endpoint                | –û–ø–∏—Å–∞–Ω–∏–µ              | –¢—Ä–µ–±—É–µ—Ç Auth | –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ         |
|--------|-------------------------|-----------------------|--------------|--------------------|
| GET    | /resources/products     | –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤        | ‚úÖ            | read products      |
| GET    | /resources/products/{id}| –û–¥–∏–Ω —Ç–æ–≤–∞—Ä            | ‚úÖ            | read products      |
| POST   | /resources/products     | –°–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä         | ‚úÖ            | create products    |
| PUT    | /resources/products/{id}| –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–≤–∞—Ä        | ‚úÖ            | update products    |
| DELETE | /resources/products/{id}| –£–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä         | ‚úÖ            | delete products    |
| GET    | /resources/orders       | –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤        | ‚úÖ            | read orders        |
| GET    | /resources/orders/{id}  | –û–¥–∏–Ω –∑–∞–∫–∞–∑            | ‚úÖ            | read orders        |
| GET    | /resources/stores       | –°–ø–∏—Å–æ–∫ –º–∞–≥–∞–∑–∏–Ω–æ–≤      | ‚úÖ            | read stores        |
| GET    | /resources/stores/{id}  | –û–¥–∏–Ω –º–∞–≥–∞–∑–∏–Ω          | ‚úÖ            | read stores        |

## ü§ù –í–∫–ª–∞–¥ –≤ –†–∞–∑–≤–∏—Ç–∏–µ

–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ, –Ω–æ –≤—ã –º–æ–∂–µ—Ç–µ —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:

### –í–æ–∑–º–æ–∂–Ω—ã–µ –£–ª—É—á—à–µ–Ω–∏—è

- [ ] Refresh —Ç–æ–∫–µ–Ω—ã –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è access —Ç–æ–∫–µ–Ω–æ–≤
- [ ] Email –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- [ ] –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è —á–µ—Ä–µ–∑ email
- [ ] –î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (2FA)
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –ø—Ä–∞–≤–∞–º–∏ (audit log)
- [ ] Rate limiting –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞
- [ ] Websocket –¥–ª—è real-time —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- [ ] –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ –¥–ª—è –±–∏–∑–Ω–µ—Å-–æ–±—ä–µ–∫—Ç–æ–≤ (–Ω–µ mock)
- [ ] GraphQL API –≤–º–µ—Å—Ç–æ/–≤ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ REST
- [ ] Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- [ ] CI/CD pipeline

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –≤ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª—è—Ö.

## üìß –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É.

---

**–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –Ω–∞ FastAPI**

